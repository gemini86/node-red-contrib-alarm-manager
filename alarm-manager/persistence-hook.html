<script type="text/javascript">
	RED.nodes.registerType('persistence-hook',{
		category: 'alarm manager',
		color: '#a6bbcf',
		defaults: {
			name: { value: '' },
			debug: { value: false },
			alarmManager: {value: '', type: 'alarm-manager'}
		},
		paletteLabel: 'alarms peristence hook',
		inputs:1,
		outputs: 0,
		icon: 'file.svg',
		label: function() {
			return this.name || 'alarms persistence hook';
		}
	});
</script>

<script type="text/html" data-template-name="persistence-hook">
	<div class="form-row">
		<label for="node-input-alarmManager"><i class="fa fa-android"></i> Alarm Manager</label>
		<input type="text" id="node-input-alarmManager">
	</div>
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="Name">
	</div>
</script>

<script type="text/html" data-help-name="persistence-hook">
	<p>Allows alarms to be injected into the alarm manager from persistent storage within your flow</p>

	<h3>Inputs</h3>
	<dl class="message-properties">
		<dt>payload
			<span class="property-type">object (alarm store)</span>
		</dt>
		<dd> the stored alarms object from your flows persistent storage. This will overwrite any alarms in the alarm manager. This
		will also reset the resend interval (if configured) and delayed send timer (if configured) </dd>
		<dt class="optional">reset
			<span class="property-type">boolean</span>
		</dt>
		<dd> setting <code>msg.reset</code> to <code>true</code> will clear all alarms held in the alarm manager.</dd>
	</dl>

</script>
