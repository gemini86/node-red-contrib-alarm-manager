<script type="text/javascript">RED.nodes.registerType('status-monitor',{
	category: 'alarm manager',
	color: '#a6bbcf',
	defaults: {
		name: { value: '' },
		alarmId: { value: '', required: true },
		alarmType: { value: '', required: true },
		goodInputs: { value: '', required: false },
		badInputs: { value: '', required: false },
		delayMinutes: { value: 5, validate: RED.validators.number(), required: true },
		strictlyBoolean: { value: false, required: true },
		debug: { value: false, required: true },
		alarmManager: {value: '', type: 'alarm-manager'}
	},
	paletteLabel: 'status monitor',
	inputs:1,
	outputs:0,
	icon: "alert.svg",
	label: function () {
		return this.name || `status monitor: ${this.alarmId}`;
	},
	oneditprepare: function () {
		$("#node-input-delayMinutes").typedInput({
			type: "num",
			typeField: "#node-input-delayMinutes-type"
		})
		$("#node-input-goodInputs").typedInput({
			type: "str",
			typeField: "#node-input-goodInputs-type"
		})
		$("#node-input-badInputs").typedInput({
			type: "str",
			typeField: "#node-input-badInputs-type"
		})
		$("#node-input-alarmId").typedInput({
			type: "str",
			typeField: "#node-input-alarmId-type"
		})
		$("#node-input-alarmType").typedInput({
			type: "str",
			typeField: "#node-input-alarmType-type"
		})
	}
});
</script>

<!--all this must change-->
<script type="text/html" data-template-name="status-monitor">
	<div class="form-row">
		<label for="node-input-alarmManager"><i class="fa fa-android"></i> Alarm Manager</label>
		<input type="text" id="node-input-alarmManager">
	</div>
	<div class="form-row">
		<label for="node-input-alarmId">Alarm Id</label>
		<input type="text" id="node-input-alarmId" placeholder="">
		<input type="hidden" id="node-input-alarmId-type">
	</div>
	<div class="form-row">
		<label for="node-input-alarmType">The alarm type that should be displayed</label>
		<input type="text" id="node-input-alarmType" placeholder="fault">
		<input type="hidden" id="node-input-alarmType-type">
	</div>
	<div class="form-row">
		<label for="node-input-goodInputs">Good input string(s) (separate multiple values with a comma)</label>
		<input type="text" id="node-input-goodInputs" placeholder="">
		<input type="hidden" id="node-input-goodInputs-type">
	</div>
	<div class="form-row">
		<label for="node-input-badInputs">Bad input string(s) (separate multiple values with a comma)</label>
		<input type="text" id="node-input-badInputs" placeholder="">
		<input type="hidden" id="node-input-badInputs-type">
	</div>
	<div class="form-row">
		<label for="node-input-delayMinutes">Delay to send alarm(minutes)</label>
		<input type="text" id="node-input-delayMinutes" placeholder="5">
		<input type="hidden" id="node-input-delayMinutes-type">
	</div>
	<div class="form-row">
		<label for="node-input-strictlyBoolean">Ignore payloads that do not match good or bad inputs? (Boolean values will still trigger alarms, eg. false = alarm, true = clear)</label>
		<input type="checkbox" id="node-input-strictlyBoolean" placeholder="">
	</div>
	<div class="form-row">
		<label for="node-input-debug"><i class="fa fa-bug"></i> Debug</label>
		<input type="checkbox" id="node-input-debug" placeholder="">
	</div>
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="">
	</div>
</script>

<script type="text/html" data-help-name="status-monitor">
	<p>monitors status strings or boolean true/false conditions</p>
</script>
